{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nexports.__esModule = true;\n\nvar lodash_sortby_1 = __importDefault(require(\"lodash.sortby\"));\n\nexports.splitWithOffsets = function (text, offsets) {\n  var lastEnd = 0;\n  var splits = [];\n\n  for (var _i = 0, _a = lodash_sortby_1[\"default\"](offsets, function (o) {\n    return o.start;\n  }); _i < _a.length; _i++) {\n    var offset = _a[_i];\n    var start = offset.start,\n        end = offset.end;\n\n    if (lastEnd < start) {\n      splits.push({\n        start: lastEnd,\n        end: start,\n        content: text.slice(lastEnd, start)\n      });\n    }\n\n    splits.push(__assign(__assign({}, offset), {\n      mark: true,\n      content: text.slice(start, end)\n    }));\n    lastEnd = end;\n  }\n\n  if (lastEnd < text.length) {\n    splits.push({\n      start: lastEnd,\n      end: text.length,\n      content: text.slice(lastEnd, text.length)\n    });\n  }\n\n  return splits;\n};\n\nexports.splitTokensWithOffsets = function (text, offsets) {\n  var lastEnd = 0;\n  var splits = [];\n\n  for (var _i = 0, _a = lodash_sortby_1[\"default\"](offsets, function (o) {\n    return o.start;\n  }); _i < _a.length; _i++) {\n    var offset = _a[_i];\n    var start = offset.start,\n        end = offset.end;\n\n    if (lastEnd < start) {\n      for (var i = lastEnd; i < start; i++) {\n        splits.push({\n          i: i,\n          content: text[i]\n        });\n      }\n    }\n\n    splits.push(__assign(__assign({}, offset), {\n      mark: true,\n      content: text.slice(start, end).join(' ')\n    }));\n    lastEnd = end;\n  }\n\n  for (var i = lastEnd; i < text.length; i++) {\n    splits.push({\n      i: i,\n      content: text[i]\n    });\n  }\n\n  return splits;\n};\n\nexports.selectionIsEmpty = function (selection) {\n  var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n  return position === 0 && selection.focusOffset === selection.anchorOffset;\n};\n\nexports.selectionIsBackwards = function (selection) {\n  if (exports.selectionIsEmpty(selection)) return false;\n  var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n  var backward = false;\n  if (!position && selection.anchorOffset > selection.focusOffset || position === Node.DOCUMENT_POSITION_PRECEDING) backward = true;\n  return backward;\n};","map":{"version":3,"sources":["../src/utils.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar lodash_sortby_1 = __importDefault(require(\"lodash.sortby\"));\nexports.splitWithOffsets = function (text, offsets) {\n    var lastEnd = 0;\n    var splits = [];\n    for (var _i = 0, _a = lodash_sortby_1[\"default\"](offsets, function (o) { return o.start; }); _i < _a.length; _i++) {\n        var offset = _a[_i];\n        var start = offset.start, end = offset.end;\n        if (lastEnd < start) {\n            splits.push({\n                start: lastEnd,\n                end: start,\n                content: text.slice(lastEnd, start)\n            });\n        }\n        splits.push(__assign(__assign({}, offset), { mark: true, content: text.slice(start, end) }));\n        lastEnd = end;\n    }\n    if (lastEnd < text.length) {\n        splits.push({\n            start: lastEnd,\n            end: text.length,\n            content: text.slice(lastEnd, text.length)\n        });\n    }\n    return splits;\n};\nexports.splitTokensWithOffsets = function (text, offsets) {\n    var lastEnd = 0;\n    var splits = [];\n    for (var _i = 0, _a = lodash_sortby_1[\"default\"](offsets, function (o) { return o.start; }); _i < _a.length; _i++) {\n        var offset = _a[_i];\n        var start = offset.start, end = offset.end;\n        if (lastEnd < start) {\n            for (var i = lastEnd; i < start; i++) {\n                splits.push({\n                    i: i,\n                    content: text[i]\n                });\n            }\n        }\n        splits.push(__assign(__assign({}, offset), { mark: true, content: text.slice(start, end).join(' ') }));\n        lastEnd = end;\n    }\n    for (var i = lastEnd; i < text.length; i++) {\n        splits.push({\n            i: i,\n            content: text[i]\n        });\n    }\n    return splits;\n};\nexports.selectionIsEmpty = function (selection) {\n    var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n    return position === 0 && selection.focusOffset === selection.anchorOffset;\n};\nexports.selectionIsBackwards = function (selection) {\n    if (exports.selectionIsEmpty(selection))\n        return false;\n    var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n    var backward = false;\n    if ((!position && selection.anchorOffset > selection.focusOffset) ||\n        position === Node.DOCUMENT_POSITION_PRECEDING)\n        backward = true;\n    return backward;\n};\n//# sourceMappingURL=utils.js.map"]},"metadata":{},"sourceType":"script"}