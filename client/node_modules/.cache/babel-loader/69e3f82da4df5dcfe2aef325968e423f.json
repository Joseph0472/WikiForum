{"ast":null,"code":"var _jsxFileName = \"D:\\\\CodeStuff\\\\WikiForum\\\\WikiForum\\\\client\\\\src\\\\components\\\\articles\\\\articledetails.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport SelectionHighlighter from \"react-highlight-selection\";\nimport '../../assets/scss/base.scss';\nimport { updateArticle } from '../../api/article';\nlet selectedText;\n\nconst ArticleDetails = props => {\n  const id = props.match.params.id;\n  const {\n    article\n  } = props;\n  console.log(props);\n\n  function selectionHandler(selection) {\n    //do something with selection\n    selectedText = selection.selection;\n    console.log(selection.selection);\n  }\n\n  function handleChange() {\n    let selectedpart = document.getElementById('htmlContent').innerText; //console.log(selectedpart);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    let selectedpart = document.getElementById('htmlContent').innerHTML;\n    console.log(selectedText); //console.log('the article is(from createarti com): ',this.state)\n    //console.log({\"htmlContent\" : selectedpart, \"_id\" : article._id}); \n\n    if (localStorage.getItem('firstName') === article.firstName && localStorage.getItem('lastName') === article.lastName) {\n      updateArticle({\n        \"htmlContent\": selectedpart,\n        \"_id\": article._id,\n        \"selectedText\": selectedText\n      });\n    } else {\n      alert('You can\\'t update the text, try log in your own account.');\n      window.location = \"http://localhost:3000/\";\n    }\n  }\n\n  function handleClick() {\n    var ele = document.getElementById(\"htmlContent\");\n\n    if (!ele.innerHTML) {\n      var doc = new DOMParser().parseFromString(article.htmlContent, \"text/xml\");\n      ele.appendChild(doc.documentElement);\n    } else {\n      alert(\"The auther highlighted: \\n\" + article.selectedText); //console.log(article.selectedText);        \n    }\n  }\n\n  if (article) {\n    console.log(!article.htmlContent);\n\n    if (article.htmlContent) {\n      //page with highlight            \n      //document.getElementById(\"htmlContent\").appendChild(doc)\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container section article-details\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card z-depth-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"card-title\",\n        onClick: handleClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 17\n        }\n      }, article.title), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"htmlContent\",\n        onClick: handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-action grey lighten-5 grey-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn pink lighten-1 z-depth-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 17\n        }\n      }, \"Restore\"), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }\n      }, \"Post by \", article.firstName, \" \", article.lastName), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }\n      }, article.date.substring(0, 10))))));\n    } else {\n      //page without highlight\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container section article-details\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card z-depth-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"card-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }\n      }, article.title), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"htmlContent\",\n        onClick: handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(SelectionHighlighter, {\n        text: article.content,\n        selectionHandler: selectionHandler,\n        customClass: \"custom-class\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 25\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-action grey lighten-5 grey-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn pink lighten-1 z-depth-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }\n      }, \"Update\"), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 29\n        }\n      }, \"Post by \", article.firstName, \" \", article.lastName), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 29\n        }\n      }, article.date.substring(0, 10))))));\n    }\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }, \"Loading articles...\"));\n  }\n};\n\nconst mapStateToProps = (state, ownPorps) => {\n  const id = ownPorps.match.params.id;\n  const articles = state.article; // console.log(articles)\n  // console.log('targetid:'+id)\n  // const thisArticle = articles ? articles._id : null\n\n  for (var i = 0; i < articles.length; i++) {\n    if (id === articles[i]._id) {\n      return {\n        article: articles[i]\n      };\n    }\n  }\n};\n\nexport default connect(mapStateToProps)(ArticleDetails);","map":{"version":3,"sources":["D:/CodeStuff/WikiForum/WikiForum/client/src/components/articles/articledetails.js"],"names":["React","connect","compose","SelectionHighlighter","updateArticle","selectedText","ArticleDetails","props","id","match","params","article","console","log","selectionHandler","selection","handleChange","selectedpart","document","getElementById","innerText","handleSubmit","e","preventDefault","innerHTML","localStorage","getItem","firstName","lastName","_id","alert","window","location","handleClick","ele","doc","DOMParser","parseFromString","htmlContent","appendChild","documentElement","title","date","substring","content","mapStateToProps","state","ownPorps","articles","i","length"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { compose } from 'redux'\r\nimport SelectionHighlighter from \"react-highlight-selection\";\r\nimport '../../assets/scss/base.scss'\r\nimport {updateArticle} from '../../api/article'\r\n\r\nlet selectedText\r\n\r\nconst ArticleDetails = (props) => {\r\n    const id = props.match.params.id;\r\n    const {article} = props\r\n    console.log(props)\r\n\r\n    function selectionHandler(selection) {\r\n        //do something with selection\r\n        selectedText = selection.selection\r\n        console.log(selection.selection);\r\n      }\r\n\r\n    function handleChange(){\r\n        let selectedpart = document.getElementById('htmlContent').innerText\r\n        //console.log(selectedpart);\r\n    }\r\n\r\n    function handleSubmit(e){\r\n        e.preventDefault();\r\n        let selectedpart = document.getElementById('htmlContent').innerHTML\r\n        console.log(selectedText)\r\n        //console.log('the article is(from createarti com): ',this.state)\r\n        //console.log({\"htmlContent\" : selectedpart, \"_id\" : article._id}); \r\n        if (localStorage.getItem('firstName') === article.firstName && localStorage.getItem('lastName') === article.lastName) {\r\n            updateArticle({\"htmlContent\" : selectedpart, \"_id\" : article._id, \"selectedText\": selectedText})\r\n        }   else {\r\n            alert('You can\\'t update the text, try log in your own account.')\r\n            window.location = \"http://localhost:3000/\"\r\n        }\r\n    }\r\n\r\n    function handleClick(){\r\n        var ele = document.getElementById(\"htmlContent\");  \r\n        if (!ele.innerHTML) {\r\n            var doc = new DOMParser().parseFromString(article.htmlContent, \"text/xml\");\r\n            ele.appendChild(doc.documentElement)\r\n        } else {\r\n            alert(\"The auther highlighted: \\n\" + article.selectedText);   \r\n            //console.log(article.selectedText);        \r\n        }\r\n\r\n    }\r\n\r\n    if(article){\r\n        console.log(!article.htmlContent);\r\n        if (article.htmlContent){\r\n            //page with highlight            \r\n            //document.getElementById(\"htmlContent\").appendChild(doc)\r\n                    return (\r\n        <div className=\"container section article-details\">\r\n            <div className=\"card z-depth-0\">\r\n                <form onSubmit={handleSubmit}>\r\n                <div className=\"card-content\">\r\n                <span className=\"card-title\" onClick={handleClick}>{article.title}</span>\r\n                    <div id=\"htmlContent\" onClick={handleChange}>\r\n                    {/* <SelectionHighlighter\r\n                        text={article.content}\r\n                        selectionHandler={selectionHandler}\r\n                        customClass=\"custom-class\"\r\n                    /> */}\r\n                    </div>\r\n                </div>\r\n                {/* {document.getElementById(\"htmlContent\").appendChild(doc)} */}\r\n                <div className=\"card-action grey lighten-5 grey-text\">\r\n                <button className=\"btn pink lighten-1 z-depth-0\">Restore</button>\r\n                    <div>Post by {article.firstName} {article.lastName}</div>\r\n                    <div>{article.date.substring(0, 10)}</div>\r\n                </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        \r\n        )\r\n        } else {\r\n            //page without highlight\r\n            return (\r\n                <div className=\"container section article-details\">\r\n                    <div className=\"card z-depth-0\">\r\n                        <form onSubmit={handleSubmit}>\r\n                        <div className=\"card-content\">\r\n                        <span className=\"card-title\">{article.title}</span>\r\n                        <div id=\"htmlContent\" onClick={handleChange}>\r\n                        <SelectionHighlighter\r\n                            text={article.content}\r\n                            selectionHandler={selectionHandler}\r\n                            customClass=\"custom-class\"\r\n                        />\r\n                        </div>\r\n                        </div>\r\n                        <div className=\"card-action grey lighten-5 grey-text\">\r\n                        <button className=\"btn pink lighten-1 z-depth-0\">Update</button>\r\n                            <div>Post by {article.firstName} {article.lastName}</div>\r\n                            <div>{article.date.substring(0, 10)}</div>\r\n                        </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n                )\r\n        }\r\n\r\n    } else {\r\n        return (\r\n            <div className=\"container center\">\r\n                <p>Loading articles...</p>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownPorps) => {\r\n    const id = ownPorps.match.params.id;\r\n    const articles = state.article\r\n    // console.log(articles)\r\n    // console.log('targetid:'+id)\r\n    // const thisArticle = articles ? articles._id : null\r\n    for (var i = 0; i < articles.length; i++) {\r\n        if(id === articles[i]._id){\r\n            return {\r\n                article: articles[i]\r\n            }\r\n        }\r\n    }\r\n    \r\n}\r\n\r\nexport default connect(mapStateToProps)(ArticleDetails)\r\n\r\n"]},"metadata":{},"sourceType":"module"}