{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _button = require(\"./button\");\n\nvar _button2 = _interopRequireDefault(_button);\n\nvar _annotation = require(\"./annotation\");\n\nvar _annotation2 = _interopRequireDefault(_annotation);\n\nvar _findSelectButtonPosition = require(\"./functions/findSelectButtonPosition\");\n\nvar _structureClientRectangle = require(\"./functions/structureClientRectangle\");\n\nvar _findHoverButtonPosition = require(\"./functions/findHoverButtonPosition\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction ReactAnnotateText(_ref) {\n  var src = _ref.src,\n      srcDoc = _ref.srcDoc,\n      height = _ref.height,\n      width = _ref.width,\n      highlightData = _ref.highlightData,\n      selectionPopup = _ref.selectionPopup,\n      hoverPopup = _ref.hoverPopup,\n      iframeTitle = _ref.iframeTitle;\n  var iframeRef = (0, _react.useRef)(null);\n\n  var _useState = (0, _react.useState)(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentSelectionData = _useState2[0],\n      changeCurrentSelectionData = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      currentHoverData = _useState4[0],\n      changeCurrentHoverData = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      buttonData = _useState6[0],\n      changeButtonData = _useState6[1];\n\n  var _useState7 = (0, _react.useState)({\n    scrollY: 0,\n    scrollX: 0\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      scrollPosition = _useState8[0],\n      changeScrollPosition = _useState8[1];\n\n  var onMouseUp = function onMouseUp() {\n    var selection = iframeRef.current.contentWindow.getSelection();\n    var selectionText = selection.toString();\n\n    if (selectionText) {\n      var clientRectangleArray = selection.getRangeAt(0).getClientRects();\n      var position = (0, _structureClientRectangle.structureClientRectangle)(clientRectangleArray, scrollPosition);\n      changeCurrentSelectionData({\n        position: position,\n        selectionText: selectionText\n      });\n      changeButtonData({\n        type: \"select\",\n        position: (0, _findSelectButtonPosition.findSelectButtonPosition)(position)\n      });\n    } else {\n      clearButtonAndCurrentData();\n    }\n  };\n\n  var onScroll = function onScroll() {\n    changeScrollPosition({\n      scrollY: iframeRef.current.contentWindow.scrollY,\n      scrollX: iframeRef.current.contentWindow.scrollX\n    });\n  };\n\n  var buttonContent = function buttonContent() {\n    if (buttonData.type === \"select\") {\n      return selectionPopup(currentSelectionData);\n    } else if (buttonData.type === \"hover\") {\n      return hoverPopup(currentHoverData);\n    }\n  };\n\n  var hoverChange = function hoverChange(hoveredId) {\n    if (hoveredId) {\n      changeCurrentHoverData(hoveredId);\n      changeButtonData({\n        type: \"hover\",\n        position: (0, _findHoverButtonPosition.findHoverButtonPosition)(hoveredId, highlightData)\n      });\n    } else {\n      clearButtonAndCurrentData();\n    }\n  };\n\n  var clearButtonAndCurrentData = function clearButtonAndCurrentData() {\n    changeCurrentSelectionData(null);\n    changeCurrentHoverData(null);\n    changeButtonData(null);\n  };\n\n  var onIframeLoad = function onIframeLoad() {\n    if (iframeRef.current) {\n      iframeRef.current.contentDocument.addEventListener(\"scroll\", onScroll);\n      iframeRef.current.contentDocument.addEventListener(\"mouseup\", onMouseUp);\n    }\n  };\n\n  (0, _react.useEffect)(function () {\n    return function () {\n      if (iframeRef && iframeRef.current && iframeRef.current.contentDocument) {\n        iframeRef.current.contentDocument.removeEventListener(\"scroll\", onScroll);\n        iframeRef.current.contentDocument.removeEventListener(\"mouseup\", onMouseUp);\n      }\n    };\n  }, []);\n  return _react2.default.createElement(\"div\", {\n    onMouseLeave: clearButtonAndCurrentData,\n    style: {\n      width: width,\n      height: height,\n      overflow: \"hidden\",\n      position: \"relative\"\n    }\n  }, _react2.default.createElement(\"iframe\", {\n    src: src,\n    srcDoc: srcDoc,\n    width: width,\n    height: height,\n    title: iframeTitle,\n    ref: iframeRef,\n    onLoad: onIframeLoad\n  }), highlightData.length && _react2.default.createElement(_annotation2.default, {\n    highlightData: highlightData,\n    scrollPosition: scrollPosition,\n    hoverChange: hoverChange\n  }), buttonData && _react2.default.createElement(_button2.default, {\n    buttonData: buttonData,\n    scrollPosition: scrollPosition,\n    content: buttonContent(),\n    onButtonClick: clearButtonAndCurrentData\n  }));\n}\n\nexports.default = ReactAnnotateText;","map":{"version":3,"sources":["/Users/Joesph/React_Apps/wikiforum-v2.0/client/node_modules/react-annotate-text/dist/index.js"],"names":["Object","defineProperty","exports","value","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","length","err","Array","isArray","TypeError","_react","require","_react2","_interopRequireDefault","_button","_button2","_annotation","_annotation2","_findSelectButtonPosition","_structureClientRectangle","_findHoverButtonPosition","obj","__esModule","default","ReactAnnotateText","_ref","src","srcDoc","height","width","highlightData","selectionPopup","hoverPopup","iframeTitle","iframeRef","useRef","_useState","useState","_useState2","currentSelectionData","changeCurrentSelectionData","_useState3","_useState4","currentHoverData","changeCurrentHoverData","_useState5","_useState6","buttonData","changeButtonData","_useState7","scrollY","scrollX","_useState8","scrollPosition","changeScrollPosition","onMouseUp","selection","current","contentWindow","getSelection","selectionText","toString","clientRectangleArray","getRangeAt","getClientRects","position","structureClientRectangle","type","findSelectButtonPosition","clearButtonAndCurrentData","onScroll","buttonContent","hoverChange","hoveredId","findHoverButtonPosition","onIframeLoad","contentDocument","addEventListener","useEffect","removeEventListener","createElement","onMouseLeave","style","overflow","title","ref","onLoad","content","onButtonClick"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _button = require(\"./button\");\n\nvar _button2 = _interopRequireDefault(_button);\n\nvar _annotation = require(\"./annotation\");\n\nvar _annotation2 = _interopRequireDefault(_annotation);\n\nvar _findSelectButtonPosition = require(\"./functions/findSelectButtonPosition\");\n\nvar _structureClientRectangle = require(\"./functions/structureClientRectangle\");\n\nvar _findHoverButtonPosition = require(\"./functions/findHoverButtonPosition\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ReactAnnotateText(_ref) {\n  var src = _ref.src,\n      srcDoc = _ref.srcDoc,\n      height = _ref.height,\n      width = _ref.width,\n      highlightData = _ref.highlightData,\n      selectionPopup = _ref.selectionPopup,\n      hoverPopup = _ref.hoverPopup,\n      iframeTitle = _ref.iframeTitle;\n\n  var iframeRef = (0, _react.useRef)(null);\n\n  var _useState = (0, _react.useState)(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentSelectionData = _useState2[0],\n      changeCurrentSelectionData = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      currentHoverData = _useState4[0],\n      changeCurrentHoverData = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      buttonData = _useState6[0],\n      changeButtonData = _useState6[1];\n\n  var _useState7 = (0, _react.useState)({\n    scrollY: 0,\n    scrollX: 0\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      scrollPosition = _useState8[0],\n      changeScrollPosition = _useState8[1];\n\n  var onMouseUp = function onMouseUp() {\n    var selection = iframeRef.current.contentWindow.getSelection();\n    var selectionText = selection.toString();\n    if (selectionText) {\n      var clientRectangleArray = selection.getRangeAt(0).getClientRects();\n      var position = (0, _structureClientRectangle.structureClientRectangle)(clientRectangleArray, scrollPosition);\n      changeCurrentSelectionData({\n        position: position,\n        selectionText: selectionText\n      });\n      changeButtonData({\n        type: \"select\",\n        position: (0, _findSelectButtonPosition.findSelectButtonPosition)(position)\n      });\n    } else {\n      clearButtonAndCurrentData();\n    }\n  };\n\n  var onScroll = function onScroll() {\n    changeScrollPosition({\n      scrollY: iframeRef.current.contentWindow.scrollY,\n      scrollX: iframeRef.current.contentWindow.scrollX\n    });\n  };\n\n  var buttonContent = function buttonContent() {\n    if (buttonData.type === \"select\") {\n      return selectionPopup(currentSelectionData);\n    } else if (buttonData.type === \"hover\") {\n      return hoverPopup(currentHoverData);\n    }\n  };\n\n  var hoverChange = function hoverChange(hoveredId) {\n    if (hoveredId) {\n      changeCurrentHoverData(hoveredId);\n      changeButtonData({\n        type: \"hover\",\n        position: (0, _findHoverButtonPosition.findHoverButtonPosition)(hoveredId, highlightData)\n      });\n    } else {\n      clearButtonAndCurrentData();\n    }\n  };\n\n  var clearButtonAndCurrentData = function clearButtonAndCurrentData() {\n    changeCurrentSelectionData(null);\n    changeCurrentHoverData(null);\n    changeButtonData(null);\n  };\n\n  var onIframeLoad = function onIframeLoad() {\n    if (iframeRef.current) {\n      iframeRef.current.contentDocument.addEventListener(\"scroll\", onScroll);\n      iframeRef.current.contentDocument.addEventListener(\"mouseup\", onMouseUp);\n    }\n  };\n\n  (0, _react.useEffect)(function () {\n    return function () {\n      if (iframeRef && iframeRef.current && iframeRef.current.contentDocument) {\n        iframeRef.current.contentDocument.removeEventListener(\"scroll\", onScroll);\n        iframeRef.current.contentDocument.removeEventListener(\"mouseup\", onMouseUp);\n      }\n    };\n  }, []);\n\n  return _react2.default.createElement(\n    \"div\",\n    {\n      onMouseLeave: clearButtonAndCurrentData,\n      style: {\n        width: width,\n        height: height,\n        overflow: \"hidden\",\n        position: \"relative\"\n      }\n    },\n    _react2.default.createElement(\"iframe\", {\n      src: src,\n      srcDoc: srcDoc,\n      width: width,\n      height: height,\n      title: iframeTitle,\n      ref: iframeRef,\n      onLoad: onIframeLoad\n    }),\n    highlightData.length && _react2.default.createElement(_annotation2.default, {\n      highlightData: highlightData,\n      scrollPosition: scrollPosition,\n      hoverChange: hoverChange\n    }),\n    buttonData && _react2.default.createElement(_button2.default, {\n      buttonData: buttonData,\n      scrollPosition: scrollPosition,\n      content: buttonContent(),\n      onButtonClick: clearButtonAndCurrentData\n    })\n  );\n}\n\nexports.default = ReactAnnotateText;"]},"metadata":{},"sourceType":"script"}